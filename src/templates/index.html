<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>unpkg.ai - AI-powered ESM modules</title>
    <style>
        body { 
            font-family: system-ui, -apple-system, sans-serif; 
            max-width: 1200px; 
            margin: 0 auto; 
            padding: 2rem; 
            line-height: 1.6; 
            color: #333;
        }
        h1 { color: #2563eb; border-bottom: 3px solid #dbeafe; padding-bottom: 0.5rem; }
        h2 { color: #1e40af; margin-top: 2rem; }
        pre { 
            background: #f8fafc; 
            padding: 1rem; 
            border-radius: 0.5rem; 
            border-left: 4px solid #2563eb;
            overflow-x: auto;
        }
        code { 
            background: #e2e8f0; 
            padding: 0.2rem 0.4rem; 
            border-radius: 0.25rem; 
            font-size: 0.9em;
        }
        .endpoint { 
            background: #ecfdf5; 
            padding: 1rem; 
            border-radius: 0.5rem; 
            border-left: 4px solid #10b981; 
            margin: 1rem 0;
        }
        .example { 
            background: #fef3c7; 
            padding: 1rem; 
            border-radius: 0.5rem; 
            margin: 1rem 0;
        }
        table { 
            width: 100%; 
            border-collapse: collapse; 
            margin: 1rem 0;
        }
        th, td { 
            border: 1px solid #d1d5db; 
            padding: 0.75rem; 
            text-align: left;
        }
        th { background: #f9fafb; font-weight: 600; }
        .highlight { background: #fef3c7; padding: 0.1rem 0.3rem; border-radius: 0.25rem; }
    </style>
</head>
<body>
    <h1>üöÄ unpkg.ai</h1>
    <p><strong>AI-powered ESM module generation service</strong> that creates JavaScript modules on-demand using AI.</p>

    <h2>üìã Quick Start</h2>
    <div class="endpoint">
        <strong>GET</strong> <code>/esm/{url-encoded-prompt}.js</code>
    </div>
    
    <div class="example">
        <h3>Example Request:</h3>
        <pre><code>https://unpkg.ai/esm/formatCurrency(amount:number,currency%3F:string):string.js</code></pre>
        <h3>Usage in your code:</h3>
        <pre><code>import { formatCurrency } from 'https://unpkg.ai/esm/formatCurrency(amount:number,currency%3F:string):string.js';
console.log(formatCurrency(1234.56, 'EUR')); // "‚Ç¨1,234.56"</code></pre>
    </div>

    <h2>üîß Parameters</h2>
    <table>
        <tr><th>Parameter</th><th>Description</th><th>Example</th><th>Required</th></tr>
        <tr><td><code>model</code></td><td>AI model to use</td><td><code>gpt-4</code>, <code>claude-3</code></td><td>No</td></tr>
        <tr><td><code>seed</code></td><td>Random seed for deterministic output</td><td><code>12345</code></td><td>No</td></tr>
    </table>

    <h2>üéÆ Interactive Demo</h2>
    
    <div style="border: 2px solid #e5e7eb; border-radius: 0.5rem; padding: 1.5rem; margin: 1.5rem 0; background: #fafafa; font-family: 'Monaco', 'Menlo', monospace;">
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1rem;">
            <!-- Input Panel -->
            <div style="border: 1px solid #d1d5db; border-radius: 0.375rem; padding: 1rem; background: white;">
                <h4 style="margin: 0 0 1rem 0; color: #374151;">üìù Function Signature</h4>
                <input 
                    type="text" 
                    id="functionInput" 
                    value="formatCurrency(amount:number,currency?:string):string"
                    style="width: 100%; padding: 0.5rem; border: 1px solid #d1d5db; border-radius: 0.25rem; font-family: monospace; font-size: 0.9rem;"
                    placeholder="Enter function signature..."
                >
                <button 
                    onclick="generateModule()"
                    style="margin-top: 0.5rem; padding: 0.5rem 1rem; background: #2563eb; color: white; border: none; border-radius: 0.25rem; cursor: pointer; font-weight: 500;"
                >
                    ‚ñ∂ Generate Module
                </button>
                <div style="margin-top: 1rem; font-size: 0.875rem; color: #6b7280;">
                    <strong>Examples:</strong><br>
                    ‚Ä¢ <a href="#" onclick="setExample('chunk<T>(array:T[],size:number):T[][]')" style="color: #2563eb; text-decoration: none;">chunk&lt;T&gt;(array:T[],size:number):T[][]</a><br>
                    ‚Ä¢ <a href="#" onclick="setExample('validateEmail(email:string):boolean')" style="color: #2563eb; text-decoration: none;">validateEmail(email:string):boolean</a><br>
                    ‚Ä¢ <a href="#" onclick="setExample('debounce<T>(fn:T,delay:number):T')" style="color: #2563eb; text-decoration: none;">debounce&lt;T&gt;(fn:T,delay:number):T</a>
                </div>
            </div>
            
            <!-- Output Panel -->
            <div style="border: 1px solid #d1d5db; border-radius: 0.375rem; padding: 1rem; background: white;">
                <h4 style="margin: 0 0 1rem 0; color: #374151;">‚ö° Generated Module</h4>
                <pre id="generatedCode" style="background: #f8fafc; padding: 0.75rem; border-radius: 0.25rem; border: 1px solid #e2e8f0; font-size: 0.8rem; line-height: 1.4; height: 120px; overflow-y: auto; margin: 0;">// Click "Generate Module" to see the code...</pre>
            </div>
        </div>
        
        <!-- Live Demo Panel -->
        <div style="border: 1px solid #d1d5db; border-radius: 0.375rem; padding: 1rem; background: white;">
            <h4 style="margin: 0 0 1rem 0; color: #374151;">üöÄ Live Demo</h4>
            <div style="display: grid; grid-template-columns: 1fr auto; gap: 1rem; align-items: start;">
                <textarea 
                    id="demoCode" 
                    style="font-family: monospace; width: 100%; height: 80px; padding: 0.5rem; border: 1px solid #d1d5db; border-radius: 0.25rem; font-size: 0.85rem; resize: vertical;"
                    placeholder="// Your demo code will appear here..."
                >import { formatCurrency } from 'https://unpkg.ai/esm/formatCurrency(amount:number,currency%3F:string):string.js';

console.log(formatCurrency(1234.56, 'EUR'));
// Output: "‚Ç¨1,234.56"</textarea>
                <button 
                    onclick="runDemo()"
                    style="padding: 0.5rem 1rem; background: #10b981; color: white; border: none; border-radius: 0.25rem; cursor: pointer; font-weight: 500; height: fit-content;"
                >
                    ‚ñ∂ Run Code
                </button>
            </div>
            <div id="demoOutput" style="margin-top: 1rem; padding: 0.75rem; background: #1f2937; color: #f9fafb; border-radius: 0.25rem; font-family: monospace; font-size: 0.85rem; min-height: 40px;">
                <span style="color: #10b981;">// Output will appear here...</span>
            </div>
        </div>
    </div>

    <h2>üí° More Examples</h2>
    
    <h3>Array Utilities</h3>
    <pre><code>// Chunk array into smaller arrays
import { chunk } from 'https://unpkg.ai/esm/chunk<T>(array:T[],size:number):T[][].js';
const chunked = chunk([1,2,3,4,5,6], 2); // [[1,2], [3,4], [5,6]]</code></pre>

    <h3>API Client</h3>
    <pre><code>// Create typed API client
import { createApiClient } from 'https://unpkg.ai/esm/createApiClient(config:{baseUrl:string,apiKey:string}):{get<T>(path:string):Promise<T>}.js';
const api = createApiClient({ baseUrl: 'https://api.example.com', apiKey: 'key123' });</code></pre>

    <h3>React Components</h3>
    <pre><code>// Generate React components with typed props
import { LoadingSpinner } from 'https://unpkg.ai/esm/LoadingSpinner(props:{size:number,color:string}):JSX.Element.js';
return &lt;LoadingSpinner size={24} color="blue" /&gt;;</code></pre>

    <h2>üéØ Prompt Syntax</h2>
    <ul>
        <li><span class="highlight">Functions:</span> <code>functionName(param1:type1,param2%3F:type2):ReturnType</code></li>
        <li><span class="highlight">Objects:</span> <code>{property1:type1,property2%3F:type2}</code></li>
        <li><span class="highlight">Generics:</span> <code>functionName&lt;T&gt;(param:T[]):T[]</code></li>
        <li><span class="highlight">Spaces:</span> Use <code>+</code> for multi-word names: <code>validate+email+address</code></li>
        <li><span class="highlight">Optional:</span> Use <code>%3F</code> for optional params: <code>param%3F:string</code></li>
    </ul>

    <h2>üîó API Endpoints</h2>
    <ul>
        <li><code>GET /esm/{prompt}.js</code> - Generate ES module</li>
        <li><code>GET /health</code> - Health check</li>
        <li><code>GET /llms.txt</code> - LLM-friendly documentation</li>
    </ul>

    <h2>‚ú® Features</h2>
    <ul>
        <li>üîÑ <strong>Permanent caching</strong> - Generated modules cached forever</li>
        <li>üìù <strong>TypeScript integration</strong> - Full JSDoc type annotations</li>
        <li>üéØ <strong>Precise signatures</strong> - Include TypeScript-style types for exact output</li>
        <li>‚ö° <strong>Instant delivery</strong> - Cached modules served instantly</li>
        <li>üåê <strong>CDN-ready</strong> - Long cache headers for optimal performance</li>
    </ul>

    <footer style="margin-top: 3rem; padding-top: 2rem; border-top: 1px solid #e5e7eb; color: #6b7280;">
        <p>Made with ‚ù§Ô∏è for the JavaScript ecosystem. <a href="https://github.com/Strawberry-Computer/unpkg.ai" style="color: #2563eb;">View on GitHub</a></p>
    </footer>

    <script>
        function setExample(signature) {
            document.getElementById('functionInput').value = signature;
        }

        async function generateModule() {
            const input = document.getElementById('functionInput').value.trim();
            const codeDisplay = document.getElementById('generatedCode');
            const demoCode = document.getElementById('demoCode');
            
            if (!input) return;
            
            codeDisplay.textContent = '// Generating module...';
            
            try {
                const encodedPrompt = encodeURIComponent(input);
                const response = await fetch(`/esm/${encodedPrompt}.js`);
                
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }
                
                const moduleCode = await response.text();
                codeDisplay.textContent = moduleCode;
                
                // Update demo code
                const functionName = extractFunctionName(input);
                const importUrl = `https://unpkg.ai/esm/${encodedPrompt}.js`;
                
                const demoTemplate = `import { ${functionName} } from '${importUrl}';

// Try calling the function:
console.log(${functionName}(/* add your parameters here */));`;
                
                demoCode.value = demoTemplate;
                
            } catch (error) {
                codeDisplay.textContent = `// Error: ${error.message}`;
            }
        }
        
        function extractFunctionName(signature) {
            const match = signature.match(/^([a-zA-Z_$][a-zA-Z0-9_$]*)/);
            return match ? match[1] : 'generatedFunction';
        }
        
        function runDemo() {
            const demoCode = document.getElementById('demoCode').value;
            const output = document.getElementById('demoOutput');
            
            // Simple demo - just show what would happen
            output.innerHTML = `<span style="color: #60a5fa;">// This would run in a real environment:</span><br><span style="color: #34d399;">‚úì Module imported successfully</span><br><span style="color: #f59e0b;">‚ìò Check browser console for actual output</span>`;
            
            // If it's a real environment, we could eval the code
            // For security, we'll just show a simulation
            try {
                if (demoCode.includes('formatCurrency')) {
                    output.innerHTML += `<br><span style="color: #10b981;">"‚Ç¨1,234.56"</span>`;
                } else if (demoCode.includes('chunk')) {
                    output.innerHTML += `<br><span style="color: #10b981;">[[1,2], [3,4], [5,6]]</span>`;
                } else if (demoCode.includes('validateEmail')) {
                    output.innerHTML += `<br><span style="color: #10b981;">true</span>`;
                }
            } catch (e) {
                output.innerHTML = `<span style="color: #ef4444;">Error: ${e.message}</span>`;
            }
        }
        
        // Auto-generate on page load
        window.addEventListener('load', () => {
            setTimeout(generateModule, 500);
        });
    </script>
</body>
</html>