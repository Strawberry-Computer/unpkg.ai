<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>unpkg.ai - AI-powered ESM modules</title>
    <style>
        body { 
            font-family: system-ui, -apple-system, sans-serif; 
            max-width: 1200px; 
            margin: 0 auto; 
            padding: 2rem; 
            line-height: 1.6; 
            color: #333;
        }
        h1 { color: #2563eb; border-bottom: 3px solid #dbeafe; padding-bottom: 0.5rem; }
        h2 { color: #1e40af; margin-top: 2rem; }
        pre { 
            background: #f8fafc; 
            padding: 1rem; 
            border-radius: 0.5rem; 
            border-left: 4px solid #2563eb;
            overflow-x: auto;
        }
        code { 
            background: #e2e8f0; 
            padding: 0.2rem 0.4rem; 
            border-radius: 0.25rem; 
            font-size: 0.9em;
        }
        .endpoint { 
            background: #ecfdf5; 
            padding: 1rem; 
            border-radius: 0.5rem; 
            border-left: 4px solid #10b981; 
            margin: 1rem 0;
        }
        .example { 
            background: #fef3c7; 
            padding: 1rem; 
            border-radius: 0.5rem; 
            margin: 1rem 0;
        }
        table { 
            width: 100%; 
            border-collapse: collapse; 
            margin: 1rem 0;
        }
        th, td { 
            border: 1px solid #d1d5db; 
            padding: 0.75rem; 
            text-align: left;
        }
        th { background: #f9fafb; font-weight: 600; }
        .highlight { background: #fef3c7; padding: 0.1rem 0.3rem; border-radius: 0.25rem; }
        
        /* Button animations and consistent styling */
        .try-now-btn {
            padding: 0.5rem 1rem;
            background: #2563eb;
            color: white;
            border: none;
            border-radius: 0.25rem;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.2s ease-in-out;
            transform: translateY(0);
        }
        
        .try-now-btn:hover {
            background: #1d4ed8;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(37, 99, 235, 0.3);
        }
        
        .try-now-btn:active {
            transform: translateY(0);
            box-shadow: 0 2px 4px rgba(37, 99, 235, 0.3);
        }
        
        .secondary-btn {
            padding: 0.5rem 1rem;
            background: #6b7280;
            color: white;
            border: none;
            border-radius: 0.25rem;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            transform: translateY(0);
        }
        
        .secondary-btn:hover {
            background: #4b5563;
            transform: translateY(-1px);
            box-shadow: 0 2px 4px rgba(107, 114, 128, 0.3);
        }
        
        .secondary-btn:active {
            transform: translateY(0);
        }
        
        .view-module-btn {
            padding: 0.5rem 1rem;
            background: #2563eb;
            color: white;
            border: none;
            border-radius: 0.25rem;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            transform: translateY(0);
        }
        
        .view-module-btn:hover {
            background: #1d4ed8;
            transform: translateY(-1px);
            box-shadow: 0 2px 4px rgba(37, 99, 235, 0.3);
        }
        
        .view-module-btn:active {
            transform: translateY(0);
        }
    </style>
</head>
<body>
    <h1>üöÄ unpkg.ai</h1>
    <p><strong>AI-powered ESM module generation service</strong> that creates JavaScript modules on-demand using AI.</p>

    <h2>üìã Quick Start</h2>
    <div class="endpoint">
        <strong>GET</strong> <code>/esm/{url-encoded-prompt}.js</code>
    </div>
    
    <div class="example">
        <h3>Example Request:</h3>
        <pre><code>https://unpkg.ai/esm/formatCurrency(amount:number,currency%3F:string):string.js</code></pre>
        <h3>Usage in your code:</h3>
        <pre><code>import { formatCurrency } from 'https://unpkg.ai/esm/formatCurrency(amount:number,currency%3F:string):string.js';
console.log(formatCurrency(1234.56, 'EUR')); // "‚Ç¨1,234.56"</code></pre>
    </div>

    <h2>üîß Parameters</h2>
    <table>
        <tr><th>Parameter</th><th>Description</th><th>Example</th><th>Required</th></tr>
        <tr><td><code>model</code></td><td>AI model to use</td><td><code>gpt-4</code>, <code>claude-3</code></td><td>No</td></tr>
        <tr><td><code>seed</code></td><td>Random seed for deterministic output</td><td><code>12345</code></td><td>No</td></tr>
    </table>


    <h2>üìö Interactive Examples</h2>

    <!-- Tip Calculator Example -->
    <div style="border: 1px solid #e5e7eb; border-radius: 0.5rem; padding: 1.5rem; margin: 1.5rem 0; background: white;">
        <h3 style="margin: 0 0 0.5rem 0; color: #374151;">üí∞ Tip Calculator with Bill Splitting</h3>
        
        <pre style="background: #f8fafc; padding: 1rem; border-radius: 0.375rem; border: 1px solid #e2e8f0; margin: 1rem 0; font-size: 0.9em; line-height: 1.4; overflow-x: auto;"><code>import { calculateTip } from 
  'https://unpkg.ai/esm/calculateTip(amount:number,percentage:number,people%3F:number):{tip:number,total:number,perPerson:number}.js';

const result = calculateTip(85.50, 18, 4);
// { tip: 15.39, total: 100.89, perPerson: 25.22 }</code></pre>

        <div style="display: flex; gap: 0.75rem; margin-top: 1rem;">
            <button onclick="openDemo('tip')" class="try-now-btn">Try Now</button>
            <button onclick="copyCode('tip')" class="secondary-btn">Copy Code</button>
            <button onclick="openModule('calculateTip(amount:number,percentage:number,people%3F:number):{tip:number,total:number,perPerson:number}')" class="view-module-btn">View Module</button>
        </div>
    </div>

    <!-- Password Generator Example -->
    <div style="border: 1px solid #e5e7eb; border-radius: 0.5rem; padding: 1.5rem; margin: 1.5rem 0; background: white;">
        <h3 style="margin: 0 0 0.5rem 0; color: #374151;">üîê Secure Password Generator</h3>
        
        <pre style="background: #f8fafc; padding: 1rem; border-radius: 0.375rem; border: 1px solid #e2e8f0; margin: 1rem 0; font-size: 0.9em; line-height: 1.4; overflow-x: auto;"><code>import { generatePassword } from 
  'https://unpkg.ai/esm/generatePassword(options%3F:{length%3F:number,symbols%3F:boolean,numbers%3F:boolean,uppercase%3F:boolean,lowercase%3F:boolean}):{password:string,strength:number,feedback:string[]}.js';

const result = generatePassword({ length: 16, symbols: true });
// { password: 'K#9m$L2pQ!7vX8nR', strength: 95, feedback: ['Very strong'] }</code></pre>

        <div style="display: flex; gap: 0.75rem; margin-top: 1rem;">
            <button onclick="openDemo('password')" class="try-now-btn">Try Now</button>
            <button onclick="copyCode('password')" class="secondary-btn">Copy Code</button>
            <button onclick="openModule('generatePassword(options%3F:{length%3F:number,symbols%3F:boolean,numbers%3F:boolean,uppercase%3F:boolean,lowercase%3F:boolean}):{password:string,strength:number,feedback:string[]}')" class="view-module-btn">View Module</button>
        </div>
    </div>

    <!-- Color Palette Example -->
    <div style="border: 1px solid #e5e7eb; border-radius: 0.5rem; padding: 1.5rem; margin: 1.5rem 0; background: white;">
        <h3 style="margin: 0 0 0.5rem 0; color: #374151;">üé® Color Palette Generator</h3>
        
        <pre style="background: #f8fafc; padding: 1rem; border-radius: 0.375rem; border: 1px solid #e2e8f0; margin: 1rem 0; font-size: 0.9em; line-height: 1.4; overflow-x: auto;"><code>import { generatePalette } from 
  'https://unpkg.ai/esm/generatePalette(baseColor:string,count%3F:number,type%3F:"complementary"|"analogous"|"triadic"):{colors:{hex:string,rgb:string,hsl:string,name:string}[],scheme:string}.js';

const palette = generatePalette('#3B82F6', 5, 'complementary');
// { colors: [{hex: '#3B82F6', name: 'Blue'}, ...], scheme: 'Complementary' }</code></pre>

        <div style="display: flex; gap: 0.75rem; margin-top: 1rem;">
            <button onclick="openDemo('palette')" class="try-now-btn">Try Now</button>
            <button onclick="copyCode('palette')" class="secondary-btn">Copy Code</button>
            <button onclick="openModule('generatePalette(baseColor:string,count%3F:number,type%3F:"complementary"|"analogous"|"triadic"):{colors:{hex:string,rgb:string,hsl:string,name:string}[],scheme:string}')" class="view-module-btn">View Module</button>
        </div>
    </div>

    <!-- Minesweeper Example -->
    <div style="border: 1px solid #e5e7eb; border-radius: 0.5rem; padding: 1.5rem; margin: 1.5rem 0; background: white;">
        <h3 style="margin: 0 0 0.5rem 0; color: #374151;">üí£ Minesweeper Game Engine</h3>
        
        <pre style="background: #f8fafc; padding: 1rem; border-radius: 0.375rem; border: 1px solid #e2e8f0; margin: 1rem 0; font-size: 0.9em; line-height: 1.4; overflow-x: auto;"><code>import { createMinesweeper } from 
  'https://unpkg.ai/esm/createMinesweeper(width:number,height:number,mines:number):{board:Cell[][],reveal:(x:number,y:number)=>string,flag:(x:number,y:number)=>boolean,getState:()=>string,reset:()=>void}.js';

const game = createMinesweeper(10, 10, 15);
const result = game.reveal(5, 5); // 'continue', 'win', or 'lose'</code></pre>

        <div style="display: flex; gap: 0.75rem; margin-top: 1rem;">
            <button onclick="openDemo('minesweeper')" class="try-now-btn">Try Now</button>
            <button onclick="copyCode('minesweeper')" class="secondary-btn">Copy Code</button>
            <button onclick="openModule('createMinesweeper(width:number,height:number,mines:number):{board:Cell[][],reveal:(x:number,y:number)=>string,flag:(x:number,y:number)=>boolean,getState:()=>string,reset:()=>void}')" class="view-module-btn">View Module</button>
        </div>
    </div>

    <!-- Expandable Demo Section (hidden by default) -->
    <div id="demoSection" style="display: none; border: 2px solid #3b82f6; border-radius: 0.5rem; padding: 1.5rem; margin: 2rem 0; background: #fafafa;">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
            <h3 id="demoTitle" style="margin: 0; color: #374151;">Interactive Demo</h3>
            <button onclick="closeDemo()" style="padding: 0.25rem 0.5rem; background: #ef4444; color: white; border: none; border-radius: 0.25rem; cursor: pointer;">‚úï Close</button>
        </div>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; margin-bottom: 1rem;">
            <!-- Code Editor -->
            <div>
                <h4 style="margin: 0 0 0.5rem 0; color: #374151;">üìù Code Editor</h4>
                <textarea id="codeEditor" style="width: 100%; height: 200px; font-family: monospace; font-size: 0.9em; padding: 0.75rem; border: 1px solid #d1d5db; border-radius: 0.25rem; resize: vertical;"></textarea>
                <button onclick="runCode()" style="margin-top: 0.5rem; padding: 0.5rem 1rem; background: #10b981; color: white; border: none; border-radius: 0.25rem; cursor: pointer;">‚ñ∂ Run Code</button>
            </div>
            
            <!-- Live Preview -->
            <div>
                <h4 style="margin: 0 0 0.5rem 0; color: #374151;">üöÄ Live Preview</h4>
                <div id="livePreview" style="background: white; border: 1px solid #d1d5db; border-radius: 0.25rem; padding: 1rem; min-height: 200px;">
                    Click "Try Now" on an example to see the interactive demo here.
                </div>
            </div>
        </div>
        
        <!-- Console Output -->
        <div>
            <h4 style="margin: 0 0 0.5rem 0; color: #374151;">üìü Console Output</h4>
            <div id="consoleOutput" style="background: #1f2937; color: #f9fafb; font-family: monospace; font-size: 0.85em; padding: 0.75rem; border-radius: 0.25rem; min-height: 60px; white-space: pre-wrap;">Ready to run code...</div>
        </div>
    </div>

    <h2>üí° More Examples</h2>
    
    <h3>Array Utilities</h3>
    <pre><code>// Chunk array into smaller arrays
import { chunk } from 'https://unpkg.ai/esm/chunk(array,size):array.js';
const numbers = [1, 2, 3, 4, 5, 6];
const chunked = chunk(numbers, 2); // [[1, 2], [3, 4], [5, 6]]</code></pre>

    <h3>User Fetcher with Complex Types</h3>
    <pre><code>// Fetch user with typed options
import { fetchUser } from 'https://unpkg.ai/esm/fetchUser(userId:number,options%3F:{includeProfile%3F:boolean,timeout%3F:number}):Promise<{id:number,name:string,email:string,createdAt:Date}>.js';
const user = await fetchUser(123, { includeProfile: true, timeout: 5000 });</code></pre>

    <h3>API Client</h3>
    <pre><code>// Create API client
import { createApiClient } from 'https://unpkg.ai/esm/createApiClient(config):object.js';
const api = createApiClient({ 
  baseUrl: 'https://api.example.com', 
  apiKey: 'key123' 
});</code></pre>

    <h3>React Components</h3>
    <pre><code>// Generate React components with typed props
import { LoadingSpinner } from 'https://unpkg.ai/esm/LoadingSpinner(props:{size:number,color:string,isVisible:boolean}):JSX.Element.js';
return &lt;LoadingSpinner size={24} color="blue" isVisible={loading} /&gt;;</code></pre>

    <h2>üé® Complex Frontend Examples</h2>
    
    <h3>Advanced Form Validator</h3>
    <pre><code>// Real-time form validation with async validators
import { createFormValidator } from 'https://unpkg.ai/esm/createFormValidator(config:{fields:{[key:string]:{required%3F:boolean,minLength%3F:number,pattern%3F:RegExp,validator%3F:(value:string)=>Promise<boolean>}},realTime%3F:boolean}):Promise<{validate:(formData:FormData)=>Promise<{isValid:boolean,errors:{[field:string]:string[]}}>,attachToForm:(form:HTMLFormElement)=>void,onFieldChange:(callback:(field:string,isValid:boolean,errors:string[])=>void)=>void}>.js';

const validator = await createFormValidator({
  fields: {
    email: { required: true, pattern: /^[^@]+@[^@]+\.[^@]+$/ },
    username: { required: true, minLength: 3, validator: async (val) => {
      const response = await fetch(`/api/check-username/${val}`);
      return response.ok;
    }},
    password: { required: true, minLength: 8 }
  },
  realTime: true
});

const form = document.getElementById('signupForm');
validator.attachToForm(form);</code></pre>

    <h3>Drag & Drop File Uploader</h3>
    <pre><code>// Modern file uploader with progress tracking
import { createFileUploader } from 'https://unpkg.ai/esm/createFileUploader(config:{endpoint:string,maxFileSize%3F:number,allowedTypes%3F:string[],multiple%3F:boolean,chunkSize%3F:number}):Promise<{attachTo:(element:HTMLElement)=>void,upload:(files:FileList)=>Promise<{success:boolean,results:{file:string,url%3F:string,error%3F:string}[]}>,onProgress:(callback:(file:string,percent:number)=>void)=>void}>.js';

const uploader = await createFileUploader({
  endpoint: '/api/upload',
  maxFileSize: 50 * 1024 * 1024, // 50MB
  allowedTypes: ['image/*', 'video/*', '.pdf'],
  multiple: true,
  chunkSize: 1024 * 1024 // 1MB chunks
});

const dropZone = document.getElementById('dropZone');
uploader.attachTo(dropZone);

uploader.onProgress((filename, percent) => {
  document.getElementById(`progress-${filename}`).value = percent;
});</code></pre>

    <h3>Rich Text Editor</h3>
    <pre><code>// WYSIWYG editor with markdown support
import { createRichEditor } from 'https://unpkg.ai/esm/createRichEditor(config:{container:string,features%3F:string[],theme%3F:string,plugins%3F:string[],autoSave%3F:boolean}):Promise<{getContent:()=>string,setContent:(content:string)=>void,insertText:(text:string)=>void,onContentChange:(callback:(content:string,wordCount:number)=>void)=>void,exportAs:(format:'html'|'markdown'|'pdf')=>Promise<string|Blob>}>.js';

const editor = await createRichEditor({
  container: '#editor',
  features: ['bold', 'italic', 'lists', 'links', 'images', 'tables', 'code'],
  theme: 'modern',
  plugins: ['markdown', 'syntax-highlight'],
  autoSave: true
});

editor.onContentChange((content, wordCount) => {
  document.getElementById('wordCount').textContent = `${wordCount} words`;
});

editor.setContent('# Welcome\n\nStart typing...');</code></pre>

    <h3>Interactive Data Dashboard</h3>
    <pre><code>// Dashboard with multiple chart types
import { createDashboard } from 'https://unpkg.ai/esm/createDashboard(config:{container:string,layout%3F:string,responsive%3F:boolean}):Promise<{addChart:(id:string,type:string,data:any[],options%3F:any)=>void,updateChart:(id:string,data:any[])=>void,addFilter:(name:string,type:string,values:any[])=>void,onFilterChange:(callback:(filters:any)=>void)=>void,exportDashboard:(format:'png'|'pdf')=>Promise<Blob>}>.js';

const dashboard = await createDashboard({
  container: '#dashboard',
  layout: 'grid',
  responsive: true
});

dashboard.addChart('sales', 'line', [
  { x: 'Jan', y: 1000 },
  { x: 'Feb', y: 1200 },
  { x: 'Mar', y: 1100 }
], { title: 'Monthly Sales' });

dashboard.addFilter('dateRange', 'date', ['2024-01-01', '2024-12-31']);</code></pre>

    <h2>üéØ Prompt Syntax</h2>
    <ul>
        <li><span class="highlight">Functions:</span> <code>functionName(param1:type1,param2%3F:type2):ReturnType</code></li>
        <li><span class="highlight">Objects:</span> <code>{property1:type1,property2%3F:type2}</code></li>
        <li><span class="highlight">Generics:</span> <code>functionName&lt;T&gt;(param:T[]):T[]</code></li>
        <li><span class="highlight">Spaces:</span> Use <code>+</code> for multi-word names: <code>validate+email+address</code></li>
        <li><span class="highlight">Optional:</span> Use <code>%3F</code> for optional params: <code>param%3F:string</code></li>
    </ul>

    <h2>üîó API Endpoints</h2>
    <ul>
        <li><code>GET /esm/{prompt}.js</code> - Generate ES module</li>
        <li><code>GET /health</code> - Health check</li>
        <li><code>GET /llms.txt</code> - LLM-friendly documentation</li>
    </ul>

    <h2>‚ú® Features</h2>
    <ul>
        <li>üîÑ <strong>Permanent caching</strong> - Generated modules cached forever</li>
        <li>üìù <strong>TypeScript integration</strong> - Full JSDoc type annotations</li>
        <li>üéØ <strong>Precise signatures</strong> - Include TypeScript-style types for exact output</li>
        <li>‚ö° <strong>Instant delivery</strong> - Cached modules served instantly</li>
        <li>üåê <strong>CDN-ready</strong> - Long cache headers for optimal performance</li>
    </ul>

    <footer style="margin-top: 3rem; padding-top: 2rem; border-top: 1px solid #e5e7eb; color: #6b7280;">
        <p>Made with ‚ù§Ô∏è for the JavaScript ecosystem. <a href="https://github.com/Strawberry-Computer/unpkg.ai" style="color: #2563eb;">View on GitHub</a></p>
    </footer>

    <script>
        function setExample(signature) {
            document.getElementById('functionInput').value = signature;
        }

        async function generateModule() {
            const input = document.getElementById('functionInput').value.trim();
            const codeDisplay = document.getElementById('generatedCode');
            const demoCode = document.getElementById('demoCode');
            
            if (!input) return;
            
            codeDisplay.textContent = '// Generating module...';
            
            try {
                const encodedPrompt = encodeURIComponent(input);
                const response = await fetch(`/esm/${encodedPrompt}.js`);
                
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }
                
                const moduleCode = await response.text();
                codeDisplay.textContent = moduleCode;
                
                // Update demo code
                const functionName = extractFunctionName(input);
                const importUrl = `https://unpkg.ai/esm/${encodedPrompt}.js`;
                
                const demoTemplate = `import { ${functionName} } from '${importUrl}';

// Try calling the function:
console.log(${functionName}(/* add your parameters here */));`;
                
                demoCode.value = demoTemplate;
                
            } catch (error) {
                codeDisplay.textContent = `// Error: ${error.message}`;
            }
        }
        
        function extractFunctionName(signature) {
            const match = signature.match(/^([a-zA-Z_$][a-zA-Z0-9_$]*)/);
            return match ? match[1] : 'generatedFunction';
        }
        
        function runDemo() {
            const demoCode = document.getElementById('demoCode').value;
            const output = document.getElementById('demoOutput');
            
            // Simple demo - just show what would happen
            output.innerHTML = `<span style="color: #60a5fa;">// This would run in a real environment:</span><br><span style="color: #34d399;">‚úì Module imported successfully</span><br><span style="color: #f59e0b;">‚ìò Check browser console for actual output</span>`;
            
            // If it's a real environment, we could eval the code
            // For security, we'll just show a simulation
            try {
                if (demoCode.includes('formatCurrency')) {
                    output.innerHTML += `<br><span style="color: #10b981;">"‚Ç¨1,234.56"</span>`;
                } else if (demoCode.includes('chunk')) {
                    output.innerHTML += `<br><span style="color: #10b981;">[[1,2], [3,4], [5,6]]</span>`;
                } else if (demoCode.includes('validateEmail')) {
                    output.innerHTML += `<br><span style="color: #10b981;">true</span>`;
                }
            } catch (e) {
                output.innerHTML = `<span style="color: #ef4444;">Error: ${e.message}</span>`;
            }
        }
        
        // Auto-generate on page load
        window.addEventListener('load', () => {
            setTimeout(generateModule, 500);
        });
        
        // Demo System Functions
        const demoTemplates = {
            tip: {
                title: 'üí∞ Tip Calculator Demo',
                code: `import { calculateTip } from 'https://unpkg.ai/esm/calculateTip(amount:number,percentage:number,people%3F:number):{tip:number,total:number,perPerson:number}.js';

const amount = 85.50;
const percentage = 18;
const people = 4;

const result = calculateTip(amount, percentage, people);
console.log(result);`,
                preview: `
                    <div style="padding: 1rem;">
                        <h4 style="margin: 0 0 1rem 0;">üßÆ Tip Calculator</h4>
                        <div style="display: grid; gap: 0.75rem; max-width: 300px;">
                            <div>
                                <label style="display: block; margin-bottom: 0.25rem; font-size: 0.9em; color: #6b7280;">Bill Amount ($)</label>
                                <input type="number" id="demoAmount" value="85.50" step="0.01" style="width: 100%; padding: 0.5rem; border: 1px solid #d1d5db; border-radius: 0.25rem;">
                            </div>
                            <div>
                                <label style="display: block; margin-bottom: 0.25rem; font-size: 0.9em; color: #6b7280;">Tip Percentage (%)</label>
                                <input type="number" id="demoTip" value="18" style="width: 100%; padding: 0.5rem; border: 1px solid #d1d5db; border-radius: 0.25rem;">
                            </div>
                            <div>
                                <label style="display: block; margin-bottom: 0.25rem; font-size: 0.9em; color: #6b7280;">Number of People</label>
                                <input type="number" id="demoPeople" value="4" style="width: 100%; padding: 0.5rem; border: 1px solid #d1d5db; border-radius: 0.25rem;">
                            </div>
                            <button onclick="updateTipCode()" style="padding: 0.5rem; background: #10b981; color: white; border: none; border-radius: 0.25rem; cursor: pointer;">Update Code</button>
                        </div>
                    </div>
                `
            },
            password: {
                title: 'üîê Password Generator Demo',
                code: `import { generatePassword } from 'https://unpkg.ai/esm/generatePassword(options%3F:{length%3F:number,symbols%3F:boolean,numbers%3F:boolean,uppercase%3F:boolean,lowercase%3F:boolean}):{password:string,strength:number,feedback:string[]}.js';

const options = {
    length: 16,
    symbols: true,
    numbers: true,
    uppercase: true,
    lowercase: true
};

const result = generatePassword(options);
console.log(result);`,
                preview: `
                    <div style="padding: 1rem;">
                        <h4 style="margin: 0 0 1rem 0;">üîê Password Options</h4>
                        <div style="display: grid; gap: 0.75rem; max-width: 300px;">
                            <div>
                                <label style="display: block; margin-bottom: 0.25rem; font-size: 0.9em; color: #6b7280;">Length: <span id="lengthValue">16</span></label>
                                <input type="range" id="demoLength" min="8" max="32" value="16" style="width: 100%;" oninput="document.getElementById('lengthValue').textContent = this.value">
                            </div>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 0.5rem;">
                                <label style="display: flex; align-items: center; cursor: pointer; font-size: 0.9em;">
                                    <input type="checkbox" id="demoSymbols" checked style="margin-right: 0.5rem;"> Symbols
                                </label>
                                <label style="display: flex; align-items: center; cursor: pointer; font-size: 0.9em;">
                                    <input type="checkbox" id="demoNumbers" checked style="margin-right: 0.5rem;"> Numbers
                                </label>
                                <label style="display: flex; align-items: center; cursor: pointer; font-size: 0.9em;">
                                    <input type="checkbox" id="demoUpper" checked style="margin-right: 0.5rem;"> Upper
                                </label>
                                <label style="display: flex; align-items: center; cursor: pointer; font-size: 0.9em;">
                                    <input type="checkbox" id="demoLower" checked style="margin-right: 0.5rem;"> Lower
                                </label>
                            </div>
                            <button onclick="updatePasswordCode()" style="padding: 0.5rem; background: #7c3aed; color: white; border: none; border-radius: 0.25rem; cursor: pointer;">Update Code</button>
                        </div>
                    </div>
                `
            },
            palette: {
                title: 'üé® Color Palette Demo',
                code: `import { generatePalette } from 'https://unpkg.ai/esm/generatePalette(baseColor:string,count%3F:number,type%3F:"complementary"|"analogous"|"triadic"):{colors:{hex:string,rgb:string,hsl:string,name:string}[],scheme:string}.js';

const baseColor = '#3B82F6';
const count = 5;
const type = 'complementary';

const palette = generatePalette(baseColor, count, type);
console.log(palette);`,
                preview: `
                    <div style="padding: 1rem;">
                        <h4 style="margin: 0 0 1rem 0;">üé® Palette Options</h4>
                        <div style="display: grid; gap: 0.75rem; max-width: 300px;">
                            <div>
                                <label style="display: block; margin-bottom: 0.25rem; font-size: 0.9em; color: #6b7280;">Base Color</label>
                                <input type="color" id="demoColor" value="#3B82F6" style="width: 100%; height: 40px; border: none; border-radius: 0.25rem; cursor: pointer;">
                            </div>
                            <div>
                                <label style="display: block; margin-bottom: 0.25rem; font-size: 0.9em; color: #6b7280;">Count</label>
                                <input type="number" id="demoCount" value="5" min="3" max="8" style="width: 100%; padding: 0.5rem; border: 1px solid #d1d5db; border-radius: 0.25rem;">
                            </div>
                            <div>
                                <label style="display: block; margin-bottom: 0.25rem; font-size: 0.9em; color: #6b7280;">Type</label>
                                <select id="demoType" style="width: 100%; padding: 0.5rem; border: 1px solid #d1d5db; border-radius: 0.25rem;">
                                    <option value="complementary">Complementary</option>
                                    <option value="analogous">Analogous</option>
                                    <option value="triadic">Triadic</option>
                                </select>
                            </div>
                            <button onclick="updatePaletteCode()" style="padding: 0.5rem; background: #f59e0b; color: white; border: none; border-radius: 0.25rem; cursor: pointer;">Update Code</button>
                        </div>
                    </div>
                `
            },
            minesweeper: {
                title: 'üí£ Minesweeper Demo',
                code: `import { createMinesweeper } from 'https://unpkg.ai/esm/createMinesweeper(width:number,height:number,mines:number):{board:Cell[][],reveal:(x:number,y:number)=>string,flag:(x:number,y:number)=>boolean,getState:()=>string,reset:()=>void}.js';

const width = 10;
const height = 10;
const mines = 15;

const game = createMinesweeper(width, height, mines);

// Try revealing a cell
const result = game.reveal(5, 5);
console.log('Reveal result:', result);

// Check game state
console.log('Game state:', game.getState());`,
                preview: `
                    <div style="padding: 1rem;">
                        <h4 style="margin: 0 0 1rem 0;">üí£ Game Options</h4>
                        <div style="display: grid; gap: 0.75rem; max-width: 300px;">
                            <div>
                                <label style="display: block; margin-bottom: 0.25rem; font-size: 0.9em; color: #6b7280;">Board Size</label>
                                <select id="demoBoardSize" style="width: 100%; padding: 0.5rem; border: 1px solid #d1d5db; border-radius: 0.25rem;">
                                    <option value="8x8x10">8√ó8 (10 mines)</option>
                                    <option value="10x10x15" selected>10√ó10 (15 mines)</option>
                                    <option value="12x12x20">12√ó12 (20 mines)</option>
                                </select>
                            </div>
                            <button onclick="updateMinesweeperCode()" style="padding: 0.5rem; background: #ef4444; color: white; border: none; border-radius: 0.25rem; cursor: pointer;">Update Code</button>
                            <div style="font-size: 0.8em; color: #6b7280; text-align: center;">
                                Creates a game object with methods to reveal cells, flag mines, and check game state.
                            </div>
                        </div>
                    </div>
                `
            }
        };
        
        function openDemo(type) {
            const demo = demoTemplates[type];
            if (!demo) return;
            
            document.getElementById('demoSection').style.display = 'block';
            document.getElementById('demoTitle').textContent = demo.title;
            document.getElementById('codeEditor').value = demo.code;
            document.getElementById('livePreview').innerHTML = demo.preview;
            document.getElementById('consoleOutput').textContent = 'Ready to run code...';
            
            // Scroll to demo section
            document.getElementById('demoSection').scrollIntoView({ behavior: 'smooth' });
        }
        
        function closeDemo() {
            document.getElementById('demoSection').style.display = 'none';
        }
        
        async function runCode() {
            const code = document.getElementById('codeEditor').value;
            const consoleOutput = document.getElementById('consoleOutput');
            
            try {
                consoleOutput.textContent = 'Running code...\n';
                
                // Create a function that captures console.log
                const logs = [];
                const originalConsoleLog = console.log;
                console.log = (...args) => {
                    logs.push(args.map(arg => typeof arg === 'object' ? JSON.stringify(arg, null, 2) : String(arg)).join(' '));
                    originalConsoleLog(...args);
                };
                
                // Execute the code
                await eval(`(async () => { ${code} })()`);
                
                // Restore console.log
                console.log = originalConsoleLog;
                
                consoleOutput.textContent = logs.length > 0 ? logs.join('\n') : 'Code executed successfully (no output)';
            } catch (error) {
                consoleOutput.textContent = `Error: ${error.message}`;
            }
        }
        
        // Update functions for interactive previews
        function updateTipCode() {
            const amount = document.getElementById('demoAmount').value;
            const tip = document.getElementById('demoTip').value;
            const people = document.getElementById('demoPeople').value;
            
            const newCode = `import { calculateTip } from 'https://unpkg.ai/esm/calculateTip(amount:number,percentage:number,people%3F:number):{tip:number,total:number,perPerson:number}.js';

const amount = ${amount};
const percentage = ${tip};
const people = ${people};

const result = calculateTip(amount, percentage, people);
console.log(result);`;
            
            document.getElementById('codeEditor').value = newCode;
        }
        
        function updatePasswordCode() {
            const length = document.getElementById('demoLength').value;
            const symbols = document.getElementById('demoSymbols').checked;
            const numbers = document.getElementById('demoNumbers').checked;
            const uppercase = document.getElementById('demoUpper').checked;
            const lowercase = document.getElementById('demoLower').checked;
            
            const newCode = `import { generatePassword } from 'https://unpkg.ai/esm/generatePassword(options%3F:{length%3F:number,symbols%3F:boolean,numbers%3F:boolean,uppercase%3F:boolean,lowercase%3F:boolean}):{password:string,strength:number,feedback:string[]}.js';

const options = {
    length: ${length},
    symbols: ${symbols},
    numbers: ${numbers},
    uppercase: ${uppercase},
    lowercase: ${lowercase}
};

const result = generatePassword(options);
console.log(result);`;
            
            document.getElementById('codeEditor').value = newCode;
        }
        
        function updatePaletteCode() {
            const color = document.getElementById('demoColor').value;
            const count = document.getElementById('demoCount').value;
            const type = document.getElementById('demoType').value;
            
            const newCode = `import { generatePalette } from 'https://unpkg.ai/esm/generatePalette(baseColor:string,count%3F:number,type%3F:"complementary"|"analogous"|"triadic"):{colors:{hex:string,rgb:string,hsl:string,name:string}[],scheme:string}.js';

const baseColor = '${color}';
const count = ${count};
const type = '${type}';

const palette = generatePalette(baseColor, count, type);
console.log(palette);`;
            
            document.getElementById('codeEditor').value = newCode;
        }
        
        function updateMinesweeperCode() {
            const boardConfig = document.getElementById('demoBoardSize').value;
            const [width, height, mines] = boardConfig.split('x').map(n => parseInt(n));
            
            const newCode = `import { createMinesweeper } from 'https://unpkg.ai/esm/createMinesweeper(width:number,height:number,mines:number):{board:Cell[][],reveal:(x:number,y:number)=>string,flag:(x:number,y:number)=>boolean,getState:()=>string,reset:()=>void}.js';

const width = ${width};
const height = ${height};
const mines = ${mines};

const game = createMinesweeper(width, height, mines);

// Try revealing a cell
const result = game.reveal(5, 5);
console.log('Reveal result:', result);

// Check game state
console.log('Game state:', game.getState());`;
            
            document.getElementById('codeEditor').value = newCode;
        }
        
        // Utility functions
        function copyCode(type) {
            const demo = demoTemplates[type];
            if (demo) {
                navigator.clipboard.writeText(demo.code).then(() => {
                    // Show a brief success message
                    const event = new CustomEvent('show-toast', { detail: { message: 'Code copied to clipboard!' } });
                    window.dispatchEvent(event);
                });
            }
        }
        
        function openModule(signature) {
            const encodedSignature = encodeURIComponent(signature);
            const url = `/esm/${encodedSignature}.js`;
            window.open(url, '_blank');
        }
    </script>
</body>
</html>